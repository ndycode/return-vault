# v1.06-D System Confidence Layer - Implementation Spec

**Version:** 1.06-D  
**Status:** Implemented  
**Date:** 2026-01-08

---

## 1. CONFIDENCE GAP AUDIT TABLE

| Action | User Worry | Current State | Fix Applied |
|--------|------------|---------------|-------------|
| Add Item | "Did it save?" | Silent navigation back | Navigation = implicit success, passive indicator added |
| Edit Item | "Are changes saved?" | Silent | Same as add |
| Archive Item | "Can I undo?" | Confirmation dialog exists | Updated copy: "Item moves to archive. You can still view it there." |
| Delete Item | "Is this permanent?" | Confirmation dialog exists | Updated copy: "This removes the item and attachments permanently." |
| Export Proof | "Did it work?" | Silent | Error shown only on failure |
| Export Backup | "Is my data backed up?" | Silent | Tracks `lastBackupDate` in store for freshness |
| Import Backup | "Will I lose data?" | Basic confirmation | Updated: "This adds items from the backup to your existing data." |
| Notification Schedule | "Are reminders set?" | Invisible | Service schedules silently (expected behavior) |
| Purchase Pro | "Did purchase complete?" | Alert shown | Updated to enterprise copy |
| Restore Purchase | "Will I get Pro back?" | Alert shown | Updated to enterprise copy |

---

## 2. REASSURANCE SURFACES LIST

| Location | Component | Message | Visibility |
|----------|-----------|---------|------------|
| ItemDetailScreen header | `SystemStatus` | "Saved on this device" | Always visible |
| Settings > Data | Collapsible section | Export/Import grouped | Visible on expand |
| Diagnostics > Backup | `DiagnosticsRow` | Last backup date or "Never" | Dev builds only |
| UpgradeScreen (isPro=true) | Static text | "All features unlocked. Your data is stored locally on this device." | When Pro |

---

## 3. COPY TONE RULES + REPLACEMENTS

### Tone Rules
1. **Calm** - No exclamation marks in success messages
2. **Neutral** - State facts, not emotions
3. **Actionable** - If error, include recovery path
4. **No blame** - "Couldn't" not "Failed to"
5. **No excitement** - No emojis, no "Success!", no "Welcome!"

### Copy Replacements

| Context | Before | After |
|---------|--------|-------|
| **Validation** | "Please enter an item name." | "Item name required" |
| **Validation** | "Please add a receipt photo." | "Add a receipt photo to continue" |
| **Success** | "Success!" | "Item saved" |
| **Success** | "Welcome to Pro!" | "Pro unlocked" |
| **Success** | "Your Pro purchase has been restored." | "Pro restored" |
| **Success** | "Imported N items successfully." | "N items imported" |
| **Error** | "Failed to save purchase. Please try again." | "Couldn't save. Your data is safe. Try again." |
| **Error** | "Failed to load item details" | "Couldn't load item. Pull down to refresh." |
| **Error** | "Failed to share proof packet" | "Couldn't share. Try again." |
| **Error** | "Failed to archive item" | "Couldn't archive. Item unchanged." |
| **Error** | "Failed to delete item" | "Couldn't delete. Item unchanged." |
| **Error** | "Failed to export backup" | "Couldn't create backup. Try again." |
| **Error** | "Failed to import backup" | "Couldn't import. Original data unchanged." |
| **Error** | "An unexpected error occurred." | "Something unexpected happened. Try again." |
| **Error** | "Something went wrong. Please try again." | "Purchase couldn't complete. Try again." |
| **Error** | "We couldn't find a Pro purchase to restore." | "No previous purchase found." |
| **Confirm** | "This will move the item to archived. You can still view it in the Archived filter." | "Item moves to archive. You can still view it there." |
| **Confirm** | "This will permanently delete this item and all its attachments. This cannot be undone." | "This removes the item and attachments permanently." |
| **Confirm** | "This will merge the backup with your current data. Do you want to continue?" | "This adds items from the backup to your existing data." |
| **Pro State** | "You're a Pro!" | "Pro Active" |
| **Pro State** | "Thank you for supporting Warranty Locker. You have access to all features." | "All features unlocked. Your data is stored locally on this device." |

---

## 4. FAILURE-SAFE FLOW MAPPING

| Failure Scenario | User-Facing Behavior | Data State | Recovery Path |
|------------------|---------------------|------------|---------------|
| Export backup fails | Alert: "Couldn't create backup. Try again." | Data unchanged | User can retry |
| Share unavailable | Silent failure, returns false | Data unchanged | Try different share method |
| Import file read fails | Alert: "Could not read file" | Original data preserved | Select different file |
| Import JSON parse fails | Alert: "Invalid backup format" | Original data preserved | Check file is valid JSON |
| Import version mismatch | Alert: "Backup version X not compatible" | Original data preserved | Use matching app version |
| Import item creation fails | Silent (per-item), count shows successfully imported | Original data preserved, partial import OK | Items not imported can be re-added |
| Purchase fails (non-cancel) | Alert: "Purchase couldn't complete. Try again." | Pro status unchanged | User can retry |
| Restore fails | Alert: "Couldn't restore. Check your connection." | Pro status unchanged | Check network, retry |
| Notification permission denied | Banner shown in Settings | Notifications not scheduled | User can enable in Settings app |
| Storage write failure | Alert with error message | Previous data preserved | Check storage space |

### Safety Guarantees
- **Import is merge-only** - Never deletes existing data
- **Each import item is independent** - One failure doesn't stop others
- **Partial imports are valid** - Returns count of successfully imported
- **All errors preserve original state** - "Original data unchanged" in all failure messages

---

## 5. FILES MODIFIED

| File | Changes |
|------|---------|
| `src/utils/copy.ts` | **NEW** - Centralized copy constants (VALIDATION, SUCCESS, ERROR, ALERT_TITLES, CONFIRM, REASSURANCE, STATUS) |
| `src/utils/index.ts` | Added export for copy module |
| `src/components/primitives/SystemStatus.tsx` | **NEW** - Passive reassurance indicator component |
| `src/components/primitives/index.ts` | Added export for SystemStatus |
| `src/hooks/useAddItem.ts` | Updated validation/error messages to use copy constants |
| `src/screens/ItemDetailScreen.tsx` | Added SystemStatus indicator, updated all Alert messages to use copy constants |
| `src/screens/SettingsScreen.tsx` | Updated all Alert messages to use copy constants |
| `src/screens/UpgradeScreen.tsx` | Updated all Alert messages, removed celebratory copy |
| `src/services/exportService.ts` | Enhanced importBackup with safety guarantees, tracks lastBackupDate |
| `src/services/diagnosticsService.ts` | Uses lastBackupDate from store |
| `src/store/settingsStore.ts` | Added lastBackupDate state and setter |

---

## 6. UX QA CHECKLIST (TRUST ONLY)

### Visual Reassurance
- [ ] ItemDetailScreen shows "Saved on this device" indicator
- [ ] UpgradeScreen (isPro) shows "Pro Active" not "You're a Pro!"
- [ ] All success alerts use neutral titles (no "Success!")

### Error Messages
- [ ] All errors start with "Couldn't" not "Failed to"
- [ ] All errors include recovery path or reassurance
- [ ] No blame language ("Oops", "Sorry")
- [ ] No exclamation marks in error messages

### Confirmation Dialogs
- [ ] Archive confirmation mentions "still viewable"
- [ ] Delete confirmation is factual about permanence
- [ ] Import confirmation clarifies merge behavior

### Failure Safety
- [ ] Import backup doesn't delete existing data
- [ ] Partial imports succeed (some items imported)
- [ ] All failures preserve original data state

### System State
- [ ] Backup date tracked on successful export
- [ ] Diagnostics shows last backup date (dev builds)

---

## ANTI-PATTERNS AVOIDED

| Pattern | Why Forbidden |
|---------|---------------|
| "Success! ðŸŽ‰" | Celebratory, unprofessional |
| "Oops, something went wrong" | Blame-adjacent, childish |
| "Welcome to Pro!" | Marketing language in functional flow |
| "Failed to X" | Blame language |
| Popups for success | Blocking, interruptive |
| Toasts for confirmation | Already avoided (not in codebase) |
| Dashboards for status | Over-engineering |
| Dedicated status screen | Unnecessary complexity |

---

v1.06-D system confidence layer implemented.
