# v1.06-C: Progressive Disclosure & Advanced-Only Surfaces

**Implementation Date:** 2026-01-08  
**Status:** Complete  
**TypeScript:** ✅ Passes

---

## DELIVERABLE 1: VISIBILITY AUDIT TABLES

### HomeScreen
| Element | Visibility | Rationale |
|---------|------------|-----------|
| Title "Purchases" | Always | Screen identity |
| Search bar | Always | Primary navigation tool |
| Filter chips | Always | Quick status filtering |
| Item cards | Always | Core content |
| Empty state | Context-dependent | Only when 0 items |

**Changes:** None required. Already minimal.

---

### AddItemScreen
| Element | Visibility | Rationale |
|---------|------------|-----------|
| Photo capture | Always | Quick proof capture |
| Item name | Always | Required identifier |
| Purchase date | Always | Essential for deadline calc |
| Return window | Always | Primary urgency driver |
| Store | **Hidden** → "Add more details" | Optional metadata |
| Warranty | **Hidden** → "Add more details" | Secondary deadline |
| Price | **Hidden** → "Add more details" | Optional metadata |
| Serial number | **Hidden** → "Add more details" | Rare field |
| Notes | **Hidden** → "Add more details" | Rare field |
| Save button | Always | Primary action |
| Free limit indicator | Context-dependent | Only when < 3 remaining |

**Default visible fields:** 4 (Photo, Name, Date, Return)  
**Hidden fields:** 5 (Store, Warranty, Price, Serial, Notes)

---

### ItemDetailScreen
| Element | Visibility | Rationale |
|---------|------------|-----------|
| Urgent banner | Context-dependent | Only when tier = urgent |
| Item name | Always | Identity |
| Archived badge | Context-dependent | Only when archived |
| Deadline tags | Always | Primary urgency info |
| Proof photo | Always | Primary evidence |
| Details (Store, Price, Dates, Serial, Notes) | **Collapsed** → "View details" | Secondary info |
| Share Proof button | Always | Primary action |
| Archive/Delete | Always | Actions |

**Section order (fixed):**
1. Urgent banner (context)
2. Header + deadline tags
3. Proof photo
4. Details (collapsed)
5. Actions

---

### SettingsScreen
| Element | Visibility | Rationale |
|---------|------------|-----------|
| Notification settings | Always expanded | Daily behavior |
| Account/Pro | Always expanded | Account status |
| Restore purchases | Visible (quiet) | Low-frequency |
| Data (Backup/Restore) | **Collapsed** → "Backup & restore" | High-risk, rare |
| About (Version, Legal) | **Collapsed** → "App info" | Rarely touched |
| Developer diagnostics | **Collapsed** (dev-only) | Debug only |

**Section order (by frequency):**
1. Notifications (daily)
2. Account (occasional)
3. Data (rare, high-risk)
4. About (rare, quiet)
5. Developer (hidden in prod)

---

## DELIVERABLE 2: ADD/EDIT PROGRESSIVE DISCLOSURE SPEC

### Default View (No scrolling required)
```
┌─────────────────────────────┐
│  [Photo Capture Area]       │
├─────────────────────────────┤
│  Item name                  │
│  [Input field]              │
├─────────────────────────────┤
│  Purchase date              │
│  [Date picker]              │
├─────────────────────────────┤
│  Return window              │
│  [None][14d][30d][60d][90d] │
├─────────────────────────────┤
│  ▼ Add more details         │
├─────────────────────────────┤
│  [Save Purchase]            │
└─────────────────────────────┘
```

### Expanded View (After tapping "Add more details")
```
┌─────────────────────────────┐
│  [Photo Capture Area]       │
├─────────────────────────────┤
│  Item name                  │
│  Purchase date              │
│  Return window              │
├─────────────────────────────┤
│  ▲ Hide details             │
│  ─────────────────────────  │
│  Store                      │
│  Warranty                   │
│  Price                      │
│  Serial number              │
│  Notes                      │
├─────────────────────────────┤
│  [Save Purchase]            │
└─────────────────────────────┘
```

### Reveal Triggers
- Trigger: Tap "Add more details" link
- Trigger: Any advanced field has data (auto-expand on edit)
- Animation: LayoutAnimation.easeInEaseOut

### Field Grouping Rules
- **Essential (always visible):** Fields required for minimum viable entry
- **Advanced (hidden):** Fields that are optional, rare, or override defaults
- **Advanced fields never block save:** All advanced fields optional

---

## DELIVERABLE 3: ITEM DETAIL DISCLOSURE SPEC

### Section Order (Fixed)
| # | Section | Default State | Rationale |
|---|---------|---------------|-----------|
| 1 | Urgent Banner | Context-dependent | Immediate attention if urgent |
| 2 | Header + Deadlines | Expanded | Primary identity + urgency |
| 3 | Proof Photo | Expanded | Visual confirmation |
| 4 | Details | **Collapsed** | Secondary info on demand |
| 5 | Actions | Expanded | Always accessible |

### Section Responsibilities
- **Section 1-3:** Answer "Do I need to act?" instantly
- **Section 4:** Answer "What are the details?" on demand
- **Section 5:** Enable action without scrolling

---

## DELIVERABLE 4: SETTINGS GROUPING SPEC

### Structure Map
```
SETTINGS
├── NOTIFICATIONS (expanded)
│   ├── Return reminder
│   ├── Warranty reminder
│   └── Quiet hours [toggle]
│
├── ACCOUNT (expanded)
│   ├── Pro status / Upgrade
│   └── Restore purchases (quiet)
│
├── DATA (collapsed)
│   └── Backup & restore
│       ├── Export backup
│       └── Import backup
│
├── ABOUT (collapsed, quiet)
│   └── App info
│       ├── Version
│       ├── Privacy Policy
│       └── Terms of Service
│
└── DEVELOPER (collapsed, dev-only)
    └── Diagnostics
```

### Section Responsibilities
| Section | Intent | Frequency | Risk |
|---------|--------|-----------|------|
| Notifications | Daily behavior | High | Low |
| Account | Status & purchase | Medium | Low |
| Data | Backup/restore | Low | **High** |
| About | Legal compliance | Very low | None |
| Developer | Debug | Dev-only | None |

---

## DELIVERABLE 5: DISCLOSURE PATTERN RULES

### Single Component: `CollapsibleSection`

**Location:** `src/components/primitives/CollapsibleSection.tsx`

**Props:**
```typescript
interface CollapsibleSectionProps {
    title: string;              // Label when expanded (e.g., "Hide details")
    triggerLabel?: string;      // Label when collapsed (e.g., "Add more details")
    defaultExpanded?: boolean;  // Initial state
    children: React.ReactNode;  // Content to reveal
    onToggle?: (expanded: boolean) => void;  // State callback
}
```

**Pattern Rules:**
1. **Same affordance everywhere:** Tap to toggle, chevron indicator
2. **Consistent labels:** "Add more details" / "View details" for expand, "Hide details" / "Hide" for collapse
3. **No custom one-offs:** All disclosure uses this component
4. **Animation:** `LayoutAnimation.easeInEaseOut` (subtle, no jarring motion)
5. **Preservation:** State controlled locally, content preserved on toggle

**Usage Examples:**
```tsx
// Add Item - hide advanced fields
<CollapsibleSection
    title="Hide details"
    triggerLabel="Add more details"
    defaultExpanded={false}
>
    {/* Advanced fields */}
</CollapsibleSection>

// Item Detail - hide purchase details
<CollapsibleSection
    title="Hide details"
    triggerLabel="View details"
    defaultExpanded={false}
>
    {/* Detail rows */}
</CollapsibleSection>

// Settings - hide backup options
<CollapsibleSection
    title="Hide backup options"
    triggerLabel="Backup & restore"
    defaultExpanded={false}
>
    {/* Export/Import options */}
</CollapsibleSection>
```

---

## DELIVERABLE 6: FILES MODIFIED

| File | Change |
|------|--------|
| `src/components/primitives/CollapsibleSection.tsx` | **NEW** - Universal disclosure component |
| `src/components/primitives/index.ts` | Added CollapsibleSection export |
| `src/screens/AddItemScreen.tsx` | Progressive disclosure for advanced fields |
| `src/screens/ItemDetailScreen.tsx` | Collapsed details section |
| `src/screens/SettingsScreen.tsx` | Grouped by intent, collapsed low-frequency |

---

## DELIVERABLE 7: UX QA CHECKLIST (Progressive Disclosure Only)

### AddItemScreen
- [ ] Default view shows only 4 fields (Photo, Name, Date, Return)
- [ ] "Add more details" trigger is visible and tappable
- [ ] Tapping reveals Store, Warranty, Price, Serial, Notes
- [ ] Tapping "Hide details" collapses section
- [ ] User input preserved when collapsing/expanding
- [ ] Save button visible without scrolling on default view
- [ ] If advanced field has data, section auto-expands on screen load

### ItemDetailScreen
- [ ] Name and deadline tags visible immediately
- [ ] Photo visible without scrolling
- [ ] "View details" trigger is visible
- [ ] Tapping reveals Store, Price, Dates, Serial, Notes
- [ ] Actions visible without scrolling (on standard screen height)
- [ ] Urgent banner appears only when urgency tier = urgent

### SettingsScreen
- [ ] Notifications section expanded by default
- [ ] Account section expanded by default
- [ ] Data section collapsed by default
- [ ] "Backup & restore" trigger reveals export/import
- [ ] About section collapsed by default
- [ ] "App info" trigger reveals version/legal
- [ ] Developer section only visible in dev mode

### General Pattern Consistency
- [ ] All collapsible sections use `CollapsibleSection` component
- [ ] Chevron indicator (▼/▲) present on all triggers
- [ ] Animation is subtle (no jarring motion)
- [ ] Collapsed state shows trigger label
- [ ] Expanded state shows title label

### Visual Noise Check
- [ ] HomeScreen: No changes, already minimal
- [ ] AddItemScreen: First glance shows ≤4 inputs
- [ ] ItemDetailScreen: First glance shows identity + urgency + photo
- [ ] SettingsScreen: First glance shows notifications + account only

---

**v1.06-C progressive disclosure implemented.**
